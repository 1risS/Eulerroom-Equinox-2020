<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Eulerroom Equinox 2020</title>
    <link rel="stylesheet" href="flyersStyle.css">
</head>

<body>
    <div class=container>
        <div id="flyerLeft" class="flyerContainer">
            <video autoplay loop muted width="525" controls>
                <source src="flyers/francesco/EulerRoom_Equinoxx_2020.mp4" type="video/mp4">
            </video>
            <img src="" width="525"/>
        </div>

        <div class="doorContainer">
            <div class="creator">
                <p>Flyer by <a href="https://www.instagram.com/nesso.official/" target="_blank">Nesso</a></p>
            </div>
            <div class="logo">
                <img src="logo/algorave_logo.png" />
            </div>
            <div class="buttonContainer" type="button">
                <a class="button" href="schedule.html">SCHEDULE</a>
            </div>
        </div>

        <div id="flyerRight"class="flyerContainer">
            <video autoplay loop muted  width="525" controls>
                <source src="flyers/francesco/EulerRoom_Equinoxx_2020.mp4" type="video/mp4">
            </video>
            <img src="" width="525" />
        </div>
    </div>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script type="text/javascript">
      const flyers = [
        { "src": "flyers/francesco/EulerRoom_Equinoxx_2020.mp4", "type": "video", "creator": "Nesso", "url":"https://www.instagram.com/nesso.official/"},
        { "src": "flyers/exploratorio/exploratorioFlyer.jpg", "type": "image", "creator":"exploratorio", "url":" https://www.instagram.com/exploratoriomed/" },
        { "src": "flyers/djalgoritmo/video-equinoxx-2020.mp4", "type": "video", "creator": "djalgoritmo", "url": "https://www.instagram.com/djalgoritmo" },
        { "src": "flyers/lucyPhillips/EE2020_LPHILLIPS.mp4", "type": "video", "creator": "Lucy Phillips", "url":"https://www.instagram.com/lucyphillips.design/"},
        { "src": "flyers/molly/MollyEastMovingPosterFinal.mp4", "type": "video", "creator": "Molly  East", "url":"https://www.instagram.com/mol.designs/"},
        { "src": "flyers/flordefuega/ee2020_flordefuega.jpg", "type": "image", "creator": "flordefuega", "url":"https://www.flordefuego.github.io/"},  
        { "src": "flyers/rachel/Fox_Rachel_Moving_Poster.mp4", "type": "video", "creator": "Rachel Fox", "url":"https://www.instagram.com/Rachelfox_designs/"},
        { "src": "flyers/shukzDesign/EulerRoom_ShukzDesign.mp4", "type": "video", "creator": "Dhruv Shukla", "url":"https://www.instagram.com/shukzdesign/"},
        { "src": "flyers/toniForce/Force_Toni_MovingPoster.mp4", "type": "video", "creator": "Toni Force", "url":"https://www.instagram.com/spellbooks_and_sketches/"},  
 
      ];
  
      const maxTime = 8000;
  
      $(() => {
        let cur = 0;
        console.log("First flyer:", flyers[cur]);
  
        const videos = $(".flyerContainer video");
        const images = $(".flyerContainer img").hide();
  
        const changeFlyer = () => {
          cur = (cur + 1) % flyers.length;
          console.log("Load next flyer:", flyers[cur]);

          $(".doorContainer .creator a")
            .attr("href", flyers[cur]['url'])
            .text(flyers[cur]['creator']);
  
          if (flyers[cur]['type'] === 'video') {
            videos.find("source").attr("src", flyers[cur]['src']);
            videos.each((i, video) => video.load());

            images.hide();
            videos.show();
          } else if (flyers[cur]['type'] === 'image') {
            images.attr("src", flyers[cur]['src']);
  
            images.show();
            videos.hide();
          }
        }
  
        images[0].onload = () => {
            console.log("Image loaded. Waiting for timeout...");
            setTimeout(changeFlyer, maxTime);
        };
  
        videos[0].oncanplaythrough = () => {
            console.log("Video ready to play. Waiting for timeout...");
            setTimeout(changeFlyer, maxTime);
        };
      });
    </script>
</body>

</html>