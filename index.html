<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Eulerroom Equinox 2020</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="stylesheet" href="flyersStyle.css">
</head>

<body>
    <div class="row">
      <div id="flyerLeft" class="col-12 col-md-4 flyerContainer">
        <video autoplay loop muted controls>
          <source src="flyers/francesco/EulerRoom_Equinoxx_2020.mp4" type="video/mp4">
        </video>
        <img src="" class="img-fluid" />
      </div>
      <div class="doorContainer  col-12 col-md-4">
            <div class="creator">
                <p>Flyer by <a href="https://www.instagram.com/nesso.official/" target="_blank">Nesso</a></p>
            </div>
            <div class="logo">
                <img src="logo/algorave_logo.png">
            </div>
            <div class="buttonContainer" type="button">
                <a class="button" href="schedule.html">SCHEDULE</a>
            </div>
            <footer class="footer">
              <h5 data-i18n="[html]footer.made-by">site made w â™¥ by <a href="https://t.me/clic_livecoding" target="_blank"> CLiC (Colectivo de Live Coders)</a></h5>
            </footer>
        </div>
      <div id="flyerRight" class="col-12 col-md-4 flyerContainer">
        <video autoplay loop muted controls>
          <source src="flyers/francesco/EulerRoom_Equinoxx_2020.mp4" type="video/mp4">
        </video>
        <img src="" class="img-fluid"/>
      </div>
    </div>
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" charset="utf-8"></script>
  <script type="text/javascript">
    const flyers = [{
        "src": "flyers/francesco/EulerRoom_Equinoxx_2020.mp4",
        "type": "video",
        "creator": "Nesso",
        "url": "https://www.instagram.com/nesso.official/"
      },
      {
        "src": "flyers/exploratorio/exploratorioFlyer.jpg",
        "type": "image",
        "creator": "exploratorio",
        "url": " https://www.instagram.com/exploratoriomed/"
      },
      {
        "src": "flyers/molly/MollyEastMovingPosterFinal.mp4",
        "type": "video",
        "creator": "Molly East",
        "url": "https://www.instagram.com/mol_desings"
      },
      {
        "src": "flyers/rachel/Fox_Rachel_Moving_Poster.mp4",
        "type": "video",
        "creator": "Rachel Fox",
        "url": "https://www.instagram.com/Rachelfox_designs/"
      },
      {
        "src": "flyers/shukzDesign/EulerRoom_ShukzDesign.mp4",
        "type": "video",
        "creator": "Dhruv Shukla",
        "url": "https://www.instagram.com/shukzdesign/"
      },
      {
        "src": "flyers/lucyPhillips/EE2020_LPHILLIPS.mp4",
        "type": "video",
        "creator": "Lucy Phillips",
        "url": "https://www.instagram.com/lucyphillips.design/"
      },
    ];

    const maxTime = 3000;

    $(() => {
      let cur = 0;
      console.log("First flyer:", flyers[cur]);

      const videos = $(".flyerContainer video");
      const images = $(".flyerContainer img").hide();

      const changeFlyer = () => {
        cur = (cur + 1) % flyers.length;
        console.log("Load next flyer:", flyers[cur]);

        $(".doorContainer .creator a")
          .attr("href", flyers[cur]['url'])
          .text(flyers[cur]['creator']);

        if (flyers[cur]['type'] === 'video') {
          videos.find("source").attr("src", flyers[cur]['src']);
          videos.each((i, video) => video.load());

          images.hide();
          videos.show();
        } else if (flyers[cur]['type'] === 'image') {
          images.attr("src", flyers[cur]['src']);

          images.show();
          videos.hide();
        }
      }

      images[0].onload = () => {
        console.log("Image loaded. Waiting for timeout...");
        setTimeout(changeFlyer, maxTime);
      };

      videos[0].oncanplaythrough = () => {
        console.log("Video ready to play. Waiting for timeout...");
        setTimeout(changeFlyer, maxTime);
      };
    });
  </script>
</body>

</html>
